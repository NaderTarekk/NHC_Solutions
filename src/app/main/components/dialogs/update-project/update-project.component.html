<form [formGroup]="form">
    <div mat-dialog-content>
        <h1 mat-dialog-title>Update Project</h1>
        <p mat-dialog-title class="text-muted">Please Complete The Form</p>

        <mat-form-field appearance="fill" class="w-100">
            <mat-label>Project Title</mat-label>
            <input matInput formControlName="projectTitle" placeholder="Please enter the project title" required />
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-100">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" placeholder="Please enter your description" required
                rows="5"></textarea>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-100">
            <mat-label>Demo Video Url</mat-label>
            <input matInput formControlName="demoVidUrl" placeholder="Please enter the demo video url" />
        </mat-form-field>

        <div *ngIf="form.invalid && form.touched" class="form-errors text-danger">
            <div *ngIf="formControls['projectTitle'].invalid && formControls['projectTitle'].touched">
                Project title is required.
            </div>
            <div *ngIf="formControls['description'].invalid && formControls['description'].touched">
                Description is required.
            </div>
        </div>

        <!-- <input id="imageUrl" type="file" (change)="onFileSelected($event)" multiple class="custom-file form-control" /> -->
        <table class="table">
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Set as Main Image</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody formArrayName="projectImages">
                <tr *ngFor="let image of projectImages.controls; let i = index" [formGroupName]="i">
                    <td>
                        <img [src]="image.value.imageUrl" alt="Image Preview" style="width: 100px; height: auto;" />
                    </td>
                    <td>
                        <mat-checkbox formControlName="isMainImage" (change)="onMainImageChange($event, i)">
                            Set as Main Image
                        </mat-checkbox>
                    </td>
                    <td>
                        <button type="button" (click)="removeImage(i)" class="btn btn-danger">Remove</button>
                    </td>
                </tr>
            </tbody>
        </table>



        <div *ngIf="imageError" class="alert alert-danger" role="alert">
            {{ imageError }}
        </div>
    </div>

    <div mat-dialog-actions>
        <button mat-button (click)="onCancel()">Cancel</button>
        <button mat-button (click)="onSubmit()" [disabled]="form.invalid || imageError">Update</button>
    </div>
</form>